<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>首飞实验报告</title>
      <link href="/posts/MarchCrash.html"/>
      <url>/posts/MarchCrash.html</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>实验概况</th><th>阿木实验室Prometheus 450 科研无人机 起飞失利</th></tr></thead><tbody><tr><td>时间</td><td>2025年3月26日10:30-11:30</td></tr><tr><td>地点</td><td>武汉大学信息学部</td></tr><tr><td>人员</td><td>张浩、赵坤、季铮</td></tr></tbody></table><p>尽管前两日积极准备，实验兴致高且流程筹划与临场问答相对完备。但似乎从开始，飞机机械本身就显为弱点。</p><h3 id="任务策划"><a href="#任务策划" class="headerlink" title="任务策划"></a>任务策划</h3><p>在室外环境下，接受GPS作为定位数据源，无人机以position顶点飞行模式运行阿木实验室自行编译的ego planner路径规划算法控制无人机运动飞行。同时，运行本人基于ORBSLAM3算法扩展的稠密建图方案，完成实时稠密建图。另外，通过调用T265以ROS封装的SDK记录保存影像数据为raw和rosbag两种格式。</p><h3 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h3><p>螺丝加固脚架，泡沫稳固电池，飞机于友谊广场绑上安全绳，上电并远程连接笔记本界面与地面站。在赵坤学长建议下，先测试飞机的基本机械性能——以position顶点模式，手动遥控悬停。没成想，当左侧遥控柄“外八”(美国手)启动螺旋桨，再缓慢上扬加油起飞时，飞机意外产生倾斜动量，导致一侧螺旋桨发生地面磕碰；遥控器停止操作，飞机意外产生水平动量，横向偏移小段距离。赵坤学长紧急叫停，遥控切换自动降落，停止手动操作，飞机即刻触地，3s后螺旋桨减速停转；先前磕碰的螺旋桨螺纹松弛，减速时产生滑丝，竖直弹射脱机。好在场地空旷，未造成人员与财产损伤，但螺旋桨由于塑性损伤永久性报废。鉴于当前飞机的安全风险，季老师叫停实验，临场分析后返回机房，飞机进入检修阶段，等待下次实验。</p><h3 id="临场分析"><a href="#临场分析" class="headerlink" title="临场分析"></a>临场分析</h3><p>GPS信号优良进入lock条件，起飞环节的侧翻与偏移现象暴露飞机机械性能整合缺陷，怀疑传感器安装或校检失准（赵坤学长建议先整体检查飞机重心是否居中，必要时拆机调整硬件）另外，为测试SLAM算法，后续实验优先选择室内有防护网环境。相应的，无人机定位数据来源更改为视觉。</p><h3 id="反思感悟"><a href="#反思感悟" class="headerlink" title="反思感悟"></a>反思感悟</h3><p>先前将精力集中于算法扩展与嵌入式开发之上，系统性忽视飞机机械性能方面实践，导致实验条件地基不稳，无法进一步开展算法效果测试。暴露本人对无人机行业本身巨大认知偏差：对当今无人机整机厂过于自信，低估无人机体系本身复杂度。纸上得来终觉浅，觉知此事要躬行。诚如赵坤学长所言，能将无人机平台打造有稳定起飞悬浮的效果，就已经值得敬佩，对比来看，由衷佩服大疆无人机卓越的整机性能与背后不计其量的巨大投入！</p><p>然而，在算法方面，坚持本人原方案。一方面由于顺利通过可行性提问面试，另一方面则由于沉没成本与个人情节。</p><p>此次实验之后，个人精力将转移至偏硬件的整机整合上，深入<a href="https://github.com/amov-lab/Prometheus/wiki/Prometheus%E4%BA%A4%E6%B5%81%E7%BE%A4%E7%AD%94%E7%96%91%E7%B2%BE%E9%80%89">阿木实验室</a>与无人机<a href="https://discuss.px4.io/c/qgroundcontrol/15">PX4飞控</a>等开发者社区学习其控制机理。好在，老师管理风格宽容，引导本人冷静分析，撰写实验报告，并给出最低效果预期，鼓励复盘总结时机成熟之后，再次挑战试飞实验。毕竟，即使梦幻如<a href="https://www.spacex.com/updates/">SpaceX</a>，近期也处于连续失败的预期折磨中，但飞机终究要感受蓝天，科学试错迭代升级，是当代流行的项目管理风格，也是飞机R&amp;D本身象征的人生信条~</p><p><img src="/./../images/IMG_1004.JPG" alt="实飞现场"></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ORBSLAM3扩展实现双目视觉稠密建图</title>
      <link href="/posts/TT1900.html"/>
      <url>/posts/TT1900.html</url>
      
        <content type="html"><![CDATA[<h3 id="背景简介"><a href="#背景简介" class="headerlink" title="背景简介"></a>背景简介</h3><p>​书接上文，在完成ORBSLAM算法于无人机P450的部署测试后，便进入到课题的高潮阶段：着手扩展算法功能并在本机实验测试，为论文理论提供支持。在向指导老师进行阶段性汇报交谈后，我们客观审视当前实验条件，综合考虑影响课题进展的多方面因素，落实具体技术路线：在ROS框架下扩展ORBSLAM3算法实现实时定位与稠密建图。下文详细记载从此纸面蓝图到实现的关键过程know-how。</p><h3 id="双目视差稠密建图"><a href="#双目视差稠密建图" class="headerlink" title="双目视差稠密建图"></a>双目视差稠密建图</h3><p>​先澄清，ORB-SLAM系列算法聚焦于技术框架本身，将绝妙的理论思想以工程化的形式打包成一个完备的标准平台，供领域内后续研究者进一步挖掘使用（因此github和gitee上才有如此丰富的二次开发内容，本实验自然也是其中一员），一举将SLAM领域的研究范式向前推进一个版本，完成从0到1并指出后续方向，堪称学术界与工业界结合的典范。当然，在具体应用上，ORBSLAM系列并没有花费过多精力，将从1到N的工作留于生态内的其他角色。在测绘领域，ORBSLAM简单实现的稀疏重建不满足任何应用场景，若需稠密重建，还需进一步引入其他方案落实为点云等数据形式。</p><p>​在纯视觉SLAM体系中，当前常见的传感器方案有单目、双目相机、RGBD相机，三者功能与价格均依次递增。考虑到当前实验资源限制(毕竟只是毕业设计，有什么用什么，充分挖掘手头的硬件资源以适应需要），本方案决定采用双目相机方案。当然，凡事都有两面性，RGB-D相机由于其测量范围和原理导致它主要适用于室内环境中；在室外环境中由于双目相机没有尺度问题，通常使用双目相机计算深度图。</p><p>​想要从双目相机获取立体，就需要追溯到相关计算机视觉原理：视差。考虑到篇幅，这里就不过多展开了，简单说来就是仿照人眼立体成像原理，利用相似关系参考双眼直接的距离(基线长)计算双目影像中共同目标与相机的距离(深度)，凭借影像中的二维坐标加上深度信息便可计算出特点坐标系中三维数据。详情可参考<a href="https://rupingcen.blog.csdn.net/article/details/104323594">此篇博文</a>前半段。</p><p>​为减少不必要的阻力，我们采用OpenCV全面内置的SGBM（Semi-Global Block Matching）算法。它基于全局能量最小化思想，结合局部匹配的效率和全局优化的精度。通过动态规划和路径聚合策略来计算每个像素的视差，从而生成稠密的视差图。详细流程讲解请自行网络搜索学习，这里直接给出相关模块代码。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp></span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">// 初始化SGBM</span>stereo_ <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">StereoSGBM</span><span class="token double-colon punctuation">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">11</span> <span class="token operator">*</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">32</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">11</span> <span class="token operator">*</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// 计算视差图</span>cv<span class="token double-colon punctuation">::</span>Mat disparity<span class="token punctuation">;</span>stereo_<span class="token operator">-></span><span class="token function">compute</span><span class="token punctuation">(</span>left_image_<span class="token punctuation">,</span> right_image_<span class="token punctuation">,</span> disparity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">// 生成深度图</span><span class="token keyword">float</span> focal_length <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">;</span>  <span class="token comment">// 相机焦距（单位：米）</span><span class="token keyword">float</span> baseline <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>      <span class="token comment">// 双目基线（单位：米）</span>cv<span class="token double-colon punctuation">::</span>Mat depth <span class="token operator">=</span> <span class="token punctuation">(</span>focal_length <span class="token operator">*</span> baseline<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>disparity <span class="token operator">/</span> <span class="token number">16.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​可见，得益于OpenCV良好的工程架构设计，用户对SGBM算法的调用具有类似API的高封装特性， 使用十分简洁方便，感谢Intel开源~~~。</p><h3 id="ROS工程结构管理"><a href="#ROS工程结构管理" class="headerlink" title="ROS工程结构管理"></a>ROS工程结构管理</h3><p>​凑齐了技术路线上所有拼图块，我们还需要一套框架去规范拼图的过程，从而及时检验与校正performance。而在SLAM领域，最方便全面的框架就是ROS(Robot Operating System)。上篇文章虽有提及ROS，但仅仅是将其作为一个简单的工具，这里就我个人的理解对其进行简介。</p><p>​在机器人看来，ROS是操作系统；在计算机（机器人端嵌入式）看来，ROS是应用程序；而在开发人员看来，ROS是工具箱，可以利用通信工具与二者进行数据接发传输，可以利用面板工具与前二者切换不同视角上的观测，甚至可以查看工具箱说明书去有针对性地补充特定应用下缺失的工具。总之，ROS是三个角色之间互动的标准，遵循这套标准可以绕开底层细节将精力集中在应用逻辑的设计开发上。</p><p>​本实验采用ROS通信中基础的话题通信模型，把建图系统分为了三个节点。第一个节点利用ORB-SLAM算法主要做相机位姿估计；第二个节点作为视差计算节点，接收原始双目图像数据计算深度图；第三个节点作为建图节点，收集第一和第二节点传入的深度图数据和位姿数据，进行点云拼接。将数据流以话题形式发布串连起所有节点，以实现全过程。整体技术路线示意如图。</p><p><img src="/./../images/image-20250321181852080.png" alt="整体技术路线图"></p><p>​具体实现上，可将上述三个节点分作三个ROS功能包放在同一工作空间下进行管理。但本人为了方便管理依赖项编译的相互影响，将后续两个节点与ORBSLAM算法分开为两个工作空间下的两个功能包。关于ROS工作空间、功能包与节点的概念与使用请自行网络搜索与实践结合摸索。</p><h3 id="ORBSLAM3源码扩展"><a href="#ORBSLAM3源码扩展" class="headerlink" title="ORBSLAM3源码扩展"></a>ORBSLAM3源码扩展</h3><p>​如前文所言，ORBSLAM3算法只支持稀疏建图，若想实现稠密建图。需如上图技术路线提取出算法实时计算出的相机位姿并传入后续节点参与建图计算。本节讲解如何实现此功能。</p><p>​作为一个完备平台，ORBSLAM发布官方提供了IT界较标准的代码框架说明；而作为一个发布近十年的标杆算法，互联网上也已经积累了大量的相关解读。然而鉴于其不可小觑的工程复杂性，要想将其真正理解透彻，个人建议如下：</p><p>先积累相关知识储备，不要小看这一点。只有具备了足够的互信息，通信的效率才有可能提上去。不客气的讲，若是对诸如 多线程、特征提取、李群、四元数等不同领域的相关概念先没有基础的理解，是没资格真正疏通整个ORBSLAM框架的。</p><p>在积累了一定量的储备后形成领域整体认知（不可能有彻底完善的一天，足够理解后剩下的边实践边补学），便可以设法阅览较权威的文献与解读去理解ORBSLAM算法整体的设计框架了。</p><p>最后一步，沉下心来复习C++语言规范（现在有类Cursor等AI工具非常方便），对照代码校正自身理解，必要时绘制类似UML的工具图，不必严格规范，足够条分缕析有效帮助理解即可，本人手工绘制的如下图（整体预览效果即可，不必深入细节，个人偏好不一定规范）。</p><p><img src="/./../images/image-20250321193922874.png" alt="手绘部分ORBSLAM3源码结构"></p><p>​对照着上方手工绘图，就如图战场上有了地图，得以精确锁定打击目标。具体对ROS功能包中ros_stereo.cc补充一个方法以发布从TrackStereo返回的Sophus库SE3f标准格式数据Tcw即可。</p><p>发布相关修改如下，详见<a href="https://github.com/8Dis-like/ORB_SLAM3/tree/master">github完整版</a>，想要进一步了解算法跟踪具体流程可参考<a href="https://zhaoxuhui.top/blog/2021/12/27/orb-slam3-note-9-stereo-tracking.html">这篇博客</a></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">ImageGrabber</span><span class="token double-colon punctuation">::</span><span class="token function">GrabStereo</span><span class="token punctuation">(</span><span class="token keyword">const</span> sensor_msgs<span class="token double-colon punctuation">::</span>ImageConstPtr<span class="token operator">&amp;</span> msgLeft<span class="token punctuation">,</span><span class="token keyword">const</span> sensor_msgs<span class="token double-colon punctuation">::</span>ImageConstPtr<span class="token operator">&amp;</span> msgRight<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Sophus<span class="token double-colon punctuation">::</span>SE3f Tcw<span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>do_rectify<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cv<span class="token double-colon punctuation">::</span>Mat imLeft<span class="token punctuation">,</span> imRight<span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">remap</span><span class="token punctuation">(</span>cv_ptrLeft<span class="token operator">-></span>image<span class="token punctuation">,</span>imLeft<span class="token punctuation">,</span>M1l<span class="token punctuation">,</span>M2l<span class="token punctuation">,</span>cv<span class="token double-colon punctuation">::</span>INTER_LINEAR<span class="token punctuation">)</span><span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">remap</span><span class="token punctuation">(</span>cv_ptrRight<span class="token operator">-></span>image<span class="token punctuation">,</span>imRight<span class="token punctuation">,</span>M1r<span class="token punctuation">,</span>M2r<span class="token punctuation">,</span>cv<span class="token double-colon punctuation">::</span>INTER_LINEAR<span class="token punctuation">)</span><span class="token punctuation">;</span>       Tcw <span class="token operator">=</span> mpSLAM<span class="token operator">-></span><span class="token function">TrackStereo</span><span class="token punctuation">(</span>imLeft<span class="token punctuation">,</span>imRight<span class="token punctuation">,</span>cv_ptrLeft<span class="token operator">-></span>header<span class="token punctuation">.</span>stamp<span class="token punctuation">.</span><span class="token function">toSec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span>    <span class="token punctuation">&#123;</span>       Tcw <span class="token operator">=</span> mpSLAM<span class="token operator">-></span><span class="token function">TrackStereo</span><span class="token punctuation">(</span>cv_ptrLeft<span class="token operator">-></span>image<span class="token punctuation">,</span>cv_ptrRight<span class="token operator">-></span>image<span class="token punctuation">,</span>cv_ptrLeft<span class="token operator">-></span>header<span class="token punctuation">.</span>stamp<span class="token punctuation">.</span><span class="token function">toSec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token operator">-></span><span class="token function">PublishPose</span><span class="token punctuation">(</span>Tcw<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token class-name">ImageGrabber</span><span class="token double-colon punctuation">::</span><span class="token function">PublishPose</span><span class="token punctuation">(</span><span class="token keyword">const</span> Sophus<span class="token double-colon punctuation">::</span>SE3f<span class="token operator">&amp;</span> Tcw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  Sophus<span class="token double-colon punctuation">::</span>SE3f Twc <span class="token operator">=</span> Tcw<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// **构造 ROS 位姿消息**</span>  geometry_msgs<span class="token double-colon punctuation">::</span>PoseStamped pose_msg<span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>header<span class="token punctuation">.</span>stamp <span class="token operator">=</span> ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>header<span class="token punctuation">.</span>frame_id <span class="token operator">=</span> <span class="token string">"map"</span><span class="token punctuation">;</span>  <span class="token comment">// **提取平移量**</span>  Eigen<span class="token double-colon punctuation">::</span>Vector3f t <span class="token operator">=</span> Twc<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">z</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// **提取旋转矩阵，并转换为四元数**</span>  Eigen<span class="token double-colon punctuation">::</span>Quaternionf <span class="token function">q</span><span class="token punctuation">(</span>Twc<span class="token punctuation">.</span><span class="token function">unit_quaternion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>x <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>y <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>z <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">z</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pose_msg<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>w <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">w</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// **发布位姿**</span>  pose_pub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>pose_msg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"slam"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>    <span class="token comment">// Create SLAM system. It initializes all system threads and gets ready to process frames.</span>    ORB_SLAM3<span class="token double-colon punctuation">::</span>System <span class="token function">SLAM</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ORB_SLAM3<span class="token double-colon punctuation">::</span>System<span class="token double-colon punctuation">::</span>STEREO<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mpSLAM <span class="token operator">=</span> <span class="token operator">&amp;</span>SLAM<span class="token punctuation">;</span>      ImageGrabber <span class="token function">igb</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>SLAM<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 初始化发布器</span>    pose_pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>geometry_msgs<span class="token double-colon punctuation">::</span>PoseStamped<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"/orb_slam3/pose"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    message_filters<span class="token double-colon punctuation">::</span>Subscriber<span class="token operator">&lt;</span>sensor_msgs<span class="token double-colon punctuation">::</span>Image<span class="token operator">></span> <span class="token function">left_sub</span><span class="token punctuation">(</span>nh<span class="token punctuation">,</span> <span class="token string">"/camera/left/image_raw"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    message_filters<span class="token double-colon punctuation">::</span>Subscriber<span class="token operator">&lt;</span>sensor_msgs<span class="token double-colon punctuation">::</span>Image<span class="token operator">></span> <span class="token function">right_sub</span><span class="token punctuation">(</span>nh<span class="token punctuation">,</span> <span class="token string">"/camera/right/image_raw"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">typedef</span> message_filters<span class="token double-colon punctuation">::</span>sync_policies<span class="token double-colon punctuation">::</span>ApproximateTime<span class="token operator">&lt;</span>sensor_msgs<span class="token double-colon punctuation">::</span>Image<span class="token punctuation">,</span> sensor_msgs<span class="token double-colon punctuation">::</span>Image<span class="token operator">></span> sync_pol<span class="token punctuation">;</span>    message_filters<span class="token double-colon punctuation">::</span>Synchronizer<span class="token operator">&lt;</span>sync_pol<span class="token operator">></span> <span class="token function">sync</span><span class="token punctuation">(</span><span class="token function">sync_pol</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> left_sub<span class="token punctuation">,</span>right_sub<span class="token punctuation">)</span><span class="token punctuation">;</span>    sync<span class="token punctuation">.</span><span class="token function">registerCallback</span><span class="token punctuation">(</span>boost<span class="token double-colon punctuation">::</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ImageGrabber<span class="token double-colon punctuation">::</span>GrabStereo<span class="token punctuation">,</span><span class="token operator">&amp;</span>igb<span class="token punctuation">,</span>_1<span class="token punctuation">,</span>_2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Stop all threads</span>    SLAM<span class="token punctuation">.</span><span class="token function">Shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Save camera trajectory</span>    SLAM<span class="token punctuation">.</span><span class="token function">SaveKeyFrameTrajectoryTUM</span><span class="token punctuation">(</span><span class="token string">"KeyFrameTrajectory_TUM_Format.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    SLAM<span class="token punctuation">.</span><span class="token function">SaveTrajectoryTUM</span><span class="token punctuation">(</span><span class="token string">"FrameTrajectory_TUM_Format.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    SLAM<span class="token punctuation">.</span><span class="token function">SaveTrajectoryKITTI</span><span class="token punctuation">(</span><span class="token string">"FrameTrajectory_KITTI_Format.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​注意，left_sub，right_sub为接收图像信息的话题，而”&#x2F;orb_slam3&#x2F;pose”为发布位姿的话题，需在稠密建图相关节点接收呼应(ROS框架类似，这里就不贴了，详见<a href="https://github.com/8Dis-like/Dense_reconstruction/tree/main">github</a>)，具体需因实验环境而调整。</p><p>​至此，拼图已经按照框架摆放有序。下面便可通过ROS环境编译对工作空间输入<a href="https://www.cnblogs.com/qixianyu/p/6605830.html">catkin_make</a>生成可执行程序，测试运行！接通了全流程，方案可行性已经得到充分验证，但为了让作品拼图更稳定可靠，无论什么环境都不会轻易散落功亏一篑，还需进行最后的Fine-Tune: 工程调优。</p><h3 id="运行结果演示"><a href="#运行结果演示" class="headerlink" title="运行结果演示"></a>运行结果演示</h3><p>​照惯例，运行指令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Roscorerosbag play <span class="token parameter variable">--pause</span> V1_01_easy.bag /cam0/image_raw:<span class="token operator">=</span>/camera/left/image_raw /cam1/image_raw:<span class="token operator">=</span>/camera/right/image_rawrosrun ORB_SLAM3 Stereo Vocabulary/ORBvoc.txt Examples_old/Stereo/EuRoC.yaml <span class="token boolean">true</span>rosrun dense_reconstruction dense_reconstructionrosrun dense_reconstruction point_cloud_saver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​其中第二句为播放EuRoC数据集，运行后 需按下空格键开始播放。</p><p>​注意，第五句命令类似第三句设计，在数据播放完毕后人为输入ctrl+C，程序判断为正常关闭并保存结果数据(稠密点云地图)。</p><p>​若终端未检测到ORBSLAM功能包路径，输入如下指令刷新。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">ROS_PACKAGE_PATH</span><span class="token operator">=</span>/home/amov/zagho_ws/src:$ROS_PACKAGE_PATH<span class="token variable">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​再打开一个终端输入rqt_graph监测ROS节点与话题，在如图左上角选择Nodes&#x2F;Topics(all)，其中矩形为话题，椭圆为节点。</p><p><img src="/./../images/image-20250321201447640.png" alt="ROS节点与话题"></p><p>​最终绘制得到三维稠密点云地图如下。</p><p><img src="/./../images/image-20250321201632456.png" alt="稠密点云地图"></p><p>​当然，由于EuRoC数据集本身轻量级方便调试的特性，数据量相对不足导致所建点云地图也不够丰富。有兴趣的读者可以自行下载与加工<a href="https://www.cvlibs.net/datasets/kitti/index.php">KITTI数据集</a>或自行采集数据进行测试。</p><p>​实机运行只需参考<a href="https://8dis-like.github.io/posts/1897.html">前一篇博客“阿木P450双目T265运行ORBSLAM”</a>调整图像来源即可。</p><p>​至此，毕业设计课题实验部分告一段落，期待后续实飞！不过除此之外，后续主要精力切换到论文撰写当中。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>樱花节</title>
      <link href="/posts/HappyDay.html"/>
      <url>/posts/HappyDay.html</url>
      
        <content type="html"><![CDATA[<p>不知何时，武汉大学被评上了AAAAA级景区，每年造访的游客络绎不绝。尤其每年三月，校园内标志性的樱花次第盛开，树下的人潮也熙熙攘攘，探寻着最完美的拍照位。身在武大最后一年，不禁恍惚一念，一年一度的樱花节，不同的时间、相同的空间，无论作为将来怀旧的谈资，或青春校园生活的感慨，亦或是武大学校发展的参考素材，都值得专门一篇文章来专门收集这短暂飘逝的花瓣。</p><p>樱花节，不同于双十一等其他人造节有一个确定的日期，它更像是一种切实唯美的生活模式写照。严格讲，它来源于樱花树的生理花期，叫“樱花季”更贴切，大概是称呼为“节”显得节奏更紧凑，给人以珍惜当下之感，也符合樱花给人的意象。开始时间参考武汉每年立春后第一次气温骤升，单纯的樱花收到盛开的信号便会集体含苞，积蓄养料后同步怦然盛放。前前后后大致持续一个月，直到区域内主要的樱花凋落完毕。没错，具体时间取决于具体哪片空间，因人们心中主观的判断而不同，但不妨碍大家维持樱花节这一图腾作为共识。</p><p>樱花节不独属于武大，甚至也不独属于武汉。连武大中最主力树种日本晚樱——看名字也知道是外来户口，但不妨碍它在珞珈山东湖畔树立自己的新名片。当然，人们最根本的过节驱动力还是工作遭遇春困期待踏青的吸引力与对樱花盛开的审美本能。然而，叠加上武大民国时期独特的建筑风格就别有一番韵味，引爆其作为AAAAA级景区的潜力。这里我就不尝试去描写了，毕竟如今人人都能方便地上网欣赏相关图片。以小见大，纵使不同文明相隔重洋且发展演化路径趋异，人作为相同物种本能中的审美与精神内核仍有共通之处，而相同的内核经过不同的包装进行表达后又有了不同的韵味。受惠于文化这般高度可塑的特性，最高明的策略当属兼顾各方审美的融合体。瓷器就是凭借在世界流转之时镶嵌进其中的各类文化痕迹才得以风靡全球，诞生于元代的青花瓷以蒙古人偏好的白色作底，被穆斯林定下钟爱的蓝色为主调，将波斯人带来的钴蓝颜料作为笔，绘制来自古埃及的葡萄藤、来自古希腊的橄榄树、当然还有来自汉文化的松竹梅兰、竹石荷叶、如意云头、龙凤鱼藻、花鸟草虫……这样一款融贯中西的全球化产品，辅以瓷器本身出色的实用性，这在当年简直堪比降维打击，得以迅速横扫世界，“瓷器(柜)”也以不可比拟的认知共识就此成为其故乡“中国”的官方代名词。<br><img src="/./../images/1240.webp" alt="创造青花瓷拍卖记录的鬼谷下山"></p><p>话题收束回来，再谈谈武大樱花节本身。尽管网络黑粉肆虐，但武汉大学的管理，可以讲每年都登上一个台阶。从早些年路边常见的不文明行为，到疫情期间严格封控一律谢绝，再到如今加速放开全方位管理与引导。活泼可爱的路标为游览奠定了基调，热心的珞珈志愿服务小站接力充当导游，临时新增的保卫部人手以严守校门与高频巡逻保障校内核心段交通（秩序直逼春运高速），配上不期而遇的小米SU7与珞樱相互衬印。不得不说，今年的樱花节给校内学生带来的生活冲击力度是疫情后最温和的。假设游客素质在连续几年相对稳定，事实证明，只要得到充分引导，游心本善的人群当然乐意成全一个美丽的校园。至此我也充分理解每年樱花节个人私藏的共享单车总被强制驱离的原因：并不只是校内人员密度增加，个人飙车风险增加；更是为了避免让游客看见成为不良行为的示范，从而加大学校整体管理难度。相反，当游客的恶面被严格禁止而善面被充分肯定与鼓励，他们外来的创造性也会注入武大，成为樱花节本身的一部分。难以置信，从前与游客争抢道路优先权的学生今年倒与艳服游客一道在樱花树下打造完美的摄影作品。<br><img src="/./../images/1240-1742442545366-1.webp" alt="武大SU7"></p><p>讲到这里，大学本身的一大属性得到突出：社区。这一属性在西方大学倒不陌生，因为大学本身便是由当地聚落在某种领导作用（宗教领袖、私人办学、政府规划）的前提下自然形成，这也是大多西方大学没有围墙的原因。自然演变而来的社区具有相对独立的周边服务设施，如CBD, 报亭、医院、邮寄地址、当地特色小店等。你或许发现，这些武大不都有吗？没错，这些都是社区的外表，而不是社区的灵魂：一种平日有意无意打造的认同感。无论是平时表达上特有的代称，还是对外宣传专用的文化符号，乃至社区内部日常惯例的特色仪式，都是值得设计与打磨的细枝末节。这些次要之处或许不入高层办学者之眼，一般由社区成员靠着主人翁意识自发培养，但却是成员对社区永远的归属感。中肯的讲，武汉大学在此方面也属于国内数一数二，不然也不会有网友的关注、大方的校友、央视的镜头将名气一次次刷高。</p><p>当然，武汉樱花节还有许多值得肯定或尚待打磨的细枝末节（这里不置可否）。比如，临近毕业季前被同学挂上许愿卡片的樱花树；不明身份见缝插针售卖樱花衍生品的小摊；而少有考虑的花粉过敏问题实有困扰却尚不见关注，若能设以专门的照料以帮助缓解必会增强社区的整体质量。</p><p>Anyway，受惠于大自然本身的绚丽，也感谢日本全力打造与传播的樱花IP，我们得以在世界各角落共同欣赏樱花盛景，品尝“樱花味”食品，打卡樱花节的必须。从武大到(Washington).D.C，从巴西到巴黎 ，天下一家亲。出门享受吧，感受春光的同时感慨樱花象征生命短暂，人生苦短应如樱花般灿烂。</p><p><img src="/./../images/WAFZ5032%5B1%5D.JPG" alt="武大珞樱一角"></p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大道行思 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>拔牙-植树</title>
      <link href="/posts/c6e6.html"/>
      <url>/posts/c6e6.html</url>
      
        <content type="html"><![CDATA[<p>躺在武汉大学口腔医院牙外科的手术台上，晃眼的探照灯模糊为半昏迷时的光斑，苦涩的清洁药水肆意喷洒在张开的口腔，鼻腔在从氧气管中大口续命的同时，脑海中Apple Music空灵旋律在耳畔回响，仿佛远处缥缈的梦想，在当下植下期许未来的希望。</p><p>本次拔牙大概是关于知与行最好的写照，从去年暑假跟着表格从社保了解到牙医福利包，到元旦伊始智齿发炎初探武大口腔拍片，我个人对口腔牙齿的认识逐渐从蒙昧转为开化，开始重视这一依靠了20年的五官。然而，在与父母亲戚朋友有限的话题交流和xhs网友的个人经验云聊中，我对拔牙的观念并没有逐渐清晰，大概是医疗本身个体差异因素的主导效应，在一些人口中，拔牙只不过是整机零件更换，说换就换即换即用；而在另一些人口中，拔牙可谓洪水猛兽，术后恢复堪称折磨不止，还有抱怨手术对牙面部相关神经永久损伤的懊恼。综合考虑两者后，我在事前便形成较为客观的心理预期：牙疼确实不是病，疼起来也确实要命；所以拔牙也只是个人的生活选择而已，具体情况具体定。如果认为长痛不如短痛，就拿起勇气去手术台与“坏牙”告别；而如果当前主观生活整体无碍又更重视保持原生五官，大可听从医嘱采取最适合自己的生活与养护方式。</p><p>具体到我的情景，拥有一颗智齿发炎的风险，而出国留学成为定局，在健康与经济双重考虑下基本确定拔牙必要性但具体的执行时间则相对灵活。就像政治上对外宣传为“准备充分的时候”，这也确实没说谎，只不过生活是具体的 ，拔牙本身可能取决于若干看似不相关的因素，而决定是人做出的，走上手术台也就取决于一瞬间的勇气与豪气。<br>进入三月天气即将转暖，开学以来持续火热的毕业设计实验突破遭遇瓶颈同步春困秋乏，而与同学朋友频繁聚餐又导致皮肤痤疮即将复发，硅谷-火人节效应激发出的过剩精力恰需要一个生活上的变曲巧妙疏导。于是，简单检查天气之后与基本医疗准备之后，当晚敲定，明天拔牙！</p><p>拔牙的具体场景已在本篇开头呈现，就不再赘述，直接进入到术后恢复联合回顾手术相关的前因后果。对于拔牙这样一个先前从未接触的领域，我有幸在如今以一颗相对成熟的心智在高度发达的互联网现代社会掌握全流程抉择与执行。拔牙前的医用冰袋准备与医院药店物资站踩点使得手术当天即使在日常繁忙的医院也能干净利落的完成以迅速返回宿舍休息调整。计算着时间表，对照着已经收藏的术后注意事项，参考着私人医疗顾问的建议，我得以全面统筹用药频次、顺序与剂量，从常识出发变通着具体情况对自己进行照顾理疗。可以说，相比先前父母的角色主导与美国发烧时无奈硬抗，本次拔牙过程作为一个系统工程呈现整体可控的态势，我能在打喷嚏前手动固定右下颌规避创口震动，我能以新拆封餐巾纸替代棉球二次止血，还能在雨天仰卧恢复后收到礼物双皮奶作为最甜美的晚餐！</p><p>当然，本次拔牙医疗过程的全面接管运营不止体现在上述具体应对上的高自主性，也体现在我区别于父母直觉上的新一代医疗认知。<br>医疗的本质是支持生命自我修复，术后的所有措施均是以此为目的。止血是为新诞生的创口提供一个相对稳定的环境以供身体形成血凝块；消炎则更是直接为身体自行恢复扫除风险障碍；而疼痛倒是身体为大脑提供一个反馈回路，为了警示身体中的异常风险，就像电脑中的显示器。它本身只是一个客观机制，在不同场景下有着不同的功用，比如手术时需要利用麻醉剂暂时断开部分回路，免得回路信息量过载导致系统崩溃（意识昏厥）而在不正当的理由下为了痛快断开回路，止疼剂也就化身为了毒品。<br>医患关系的本质是联盟，是为了达到治愈目的的合作分工。医生掌握技术与经验上的优势，患者更了解医疗对象——自身身体的情况，二者优势互补，共同决策,利益共享,风险共担。相比与老一代更倾向于将医疗视为消费时对医生穷追不舍的盘问以缓解自身认知上情绪上的焦虑，我相信医生护士更乐于与我讲解注意事项与交代各类风险。<br>在当今认知条件下，我已能构建起具备类似上述原则级别的认知。那么在具体情景下，如果沉下心来思考，便能够看清联盟大致的前进方向，理清自己的权责并与医护成熟而高效沟通以宏观调整。比如此案例，本人右边拔了上下两颗，咀嚼时下部连接痛感明显大于上部，大概因为医生在术前交代说下牙有连接神经，发炎时问题通过神经传导痛觉（拔前也是这个道理）。那要反过来想，我左边智齿从来没痛过的话，拔下来是不是就不这么疼了，或者，根本就没必要拔了。。。<br>就像同学所说，如果我的牙自然凋落的速度还赶不上我身体衰老的速度，那么在有生之年便不必专心去拔牙了。这句话乍听起来是脑筋急转弯，但推敲起来确实站得住脚。而对于它的认识不仅局限于医患认知，更需要突破到对于生死的理解。自人类开始主观研究以来，生命的定义就一直迭代升级，从自我复制的细胞到脑电波具有特征的信号似乎在不同场合下，生命的表现形式可以完全不一样。相应的，作为生命的对立，死亡也没有明确的界限，不然也不会有死而复生的Lazarus奇迹。或许是因为生命系统本身足够复杂，还是就拔牙本身来说，表面上只是物理去除疼痛的来源，而实际上这一行动足以牵一发而动全身。牙齿消失后，相应区域的牙神经都得跟着调整，及时数周后物理创口自动愈合，深层的神经回路还得花上数月进行重构，而过程中若稍有差错，都可能导致神经的敏捷度不比从前，面部肿胀就是神经细胞尚且混乱麻木的表现。事实上，拔牙前后的神经感受注定不完全相同，可能只是差别过小主观分辨不出罢了。因此，凡事没有绝对，祸福相伴，生死相依，冷静看待全面分析，科学的知配上人文的行 努力在生死之间维持一个相对平衡的稳态，享受自由，感恩幸福，或许才是最智慧的选择。</p><p>相比拔牙，植树显得相对简单。蚂蚁森林巧妙地将人们在互联网上的游戏粘性导向了公益环保与健康绿色的方面，在其持续创新的平台上，我个人便默默设立了自己的心愿：三年植树节参与种植三棵分别分布于中国东北、西南、西北的树木（大概因为我个人经常往返生活在中部与东南，相对熟悉），以便将来物是人非时亲身赶赴它们身边与长大的它们讲述短暂生命的故事，让它们被树苗记着传递下去。尤其是今年新种植的胡杨，传说种下三千年不死，死后三千年不倒，倒后三千年不腐！九千年的星斗，足以冠绝人类文明史，如此宏伟的尺度足以让平凡的生命敬畏天地的生死轮回。<br>而为了达成这个指标，我也废了些有趣功夫。在年初时，简单计算了下胡杨所需能量与当前差值，平均到每天需要300g+能量，那不除去拯救能量雨，恨不得每天100g+纯步数带来的能量。好吧，开源-节流。节流好说，忍住少花能量给保护地就好。至于开源，一方面发动哈罗单车，优先支付宝付款，好友能量定闹钟收割；另一方面感谢平台推出的活力值兑换额外拯救能量雨机会；当然，不负平台本心，运动量步数也不会落下。而需求端解决后，没料到供给端也有风险，或许是因为中国西北过于干旱的气候，能重活树苗的地方不多，胡杨的默认供给来源集中在巴彦淖尔（此地在内蒙古东部），所幸的是，蚂蚁森林在植树节带来了惊喜福地：新疆喀什。就像平台本身的使命：在沙漠里开辟出一片绿洲。在见到的那一刻，我便闭眼种，终于实现上述心愿的第一步。接下来，就是我去大千世界积累故事的阶段了。</p><p>拔下两颗牙，种下三棵树，生命以不同形式轮转，死亡以不同定义被推翻。冀以微尘补益山海；萤烛末光增辉日月。生活也是一种态度，一种自我渴望在天地玄黄盈满而归的磅礴力量。无论有意无意，趁春天好好修养声息，改改自己生活上的臭毛病！</p><p><img src="/./../images/image-20250316091514033.png" alt="种树地图-待更新"></p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mens et Manus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Human Universe Symbiosis</title>
      <link href="/posts/tri4ees.html"/>
      <url>/posts/tri4ees.html</url>
      
        <content type="html"><![CDATA[<p>Inspired by the evolution progress of the universe and <a href="https://f9efytczvc.feishu.cn/mindnotes/bmncna1tfWru4U0RiWAIVifwcje?from=from_copylink">吴军-信息论</a>, I happened to devise an interesting general model that especially coincides with the social relationship at this age: Human Universe Symbiosis.</p><p>As you may think, it reveres the idea like “天人合一”. In this colliding and spinning age, each of us is dreaming of niches and crannies to land and hide.</p><p>However, wisdom has to see through the truth.<br>So let’s start our fantastic journey of the dark universe.</p><p>In the vast void, stars are sparsely scattered even if each has a view of countless others’ previous images. Stars are eager for partners to work with, companions to dance with, and chances to shine at the sacrifice of their lives.<br>Those who have mated sanctifying love incorporate into each other bearing cozy and pain. Those who are immersed in fierce interactions paint splendor with clashes. Those who have faith in loyalty ignore their distances measured in lightyear. </p><p>Generally, the truth sounds disappointing. Each star is surrounded by a homogenous monotonous universal microwave background radioactive identifying its only belonging: the universe.<br>They are free but lonely. They are bright but naive.<br>They are drifting with the conception of meaning. They are hallucinating the myths of success. They are pondering the destiny of all of these.</p><p>But there is something attractive and admirable. Each star contributes its special light to the void, resonating with others, no matter near or far.  They bring this universe warmth bit by bit using their own hearts and hands. Old stars recede giving away to the newborn. Some of them derive beauty from what they see and they dub it artistry. Planets of them share a common disk and they call it a galaxy. Comets remember to revisit although it may take the whole lifespan.</p><p>The most breathtaking definitely comes down to philosophy. Under such a system, they endow the principles entities, they glimpse the axioms, and they leave their words the codes of civilization.<br>盖将自其变着而观之，则天地曾不能以一瞬；<br>自其不变者而观之，则物与我皆无尽也，而又何羡乎？</p><p>参横斗转欲三更，苦雨终风也解晴。<br>云散月明谁点缀？天容海色本澄清。<br>空余鲁叟乘桴意，粗识轩辕奏乐声。<br>九死南荒吾不恨，兹游奇绝冠平生。</p><p>And that’s, I think, how we make this party together. Our diversity reflects our core values, which compose such an unbelievable symbiosis.</p><p>The truth may appear intimating, but the future could only be carried by the mercury, light. And that’s why it’s named “hi-story”.</p><p>在人群中穿行，总要记得一些人，总要一些人记得。<br>海底月是天上月，眼前人是心上人。</p>]]></content>
      
      
      <categories>
          
          <category> 元智慧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 交往通信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿木P450双目T265运行ORBSLAM</title>
      <link href="/posts/1897.html"/>
      <url>/posts/1897.html</url>
      
        <content type="html"><![CDATA[<h3 id="背景简介"><a href="#背景简介" class="headerlink" title="背景简介"></a>背景简介</h3><p>​为完成毕设选题“基于视觉定位的自主无人机(P450)测绘数据采集和处理”，实验室购入器材阿木实验室Prometheus450型(P450)科研无人机，配备了搭载 NVIDIA Jetson Orion NX 模块的微型边缘计算机Allspark、开源飞控PX4、Intel RealSense系列双目跟踪相机T265，以及与其相关预先完成编译的常规SDK配置。</p><p><img src="/./../images/1739712779565-1.png" alt="jtop命令一览本机环境配置"></p><p>​当然，作为科研实验无人机，与大疆等公司成熟产品相比。无论是飞机本身，还是开发套件，都显得相对原始，在使用过程中需要谨慎处理各项细节，安全第一。飞行保养参考<a href="https://www.bilibili.com/video/BV1AS4y1C7Me/?spm_id_from=333.999.0.0&vd_source=5a92605e76f765e62ce1271c52ec8bed">P450室外首飞</a> <img src="/./../images/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.jpg" alt="开发环境"></p><h3 id="ORBSLAM安装编译"><a href="#ORBSLAM安装编译" class="headerlink" title="ORBSLAM安装编译"></a>ORBSLAM安装编译</h3><p>​经老师指导，确定研究技术路径为<a href="https://en.wikipedia.org/wiki/Simultaneous_localization_and_mapping">Simultaneous localization and mapping</a>(SLAM)。而经过初步理论对比研究，确定先测试综合性能优良且兼容各类传感器极具泛用性的经典算法<a href="https://gitee.com/DASSD/successful-slam/tree/master">ORBSLAM2</a>(考虑到现有软硬件环境，选择采用兼容性更好的第二代算法)。</p><p>​算法本身安装编译过程操作相对容易，按照仓库中指导逐步运行以下命令即可。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/raulmur/ORB_SLAM2.git ORB_SLAM2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ORB_SLAM2<span class="token function">chmod</span> +x build.sh./build.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>​也可将安装脚本build.sh中的命令拆开依次执行安装，先安装编译各依赖项再处理算法本身，注意彼此版本的兼容性即可。</p><p>​然而，要想调用本地传感器实时运行ORBSLAM算法且具有良好的开发环境，还需要完成ROS接口的编译。这里简单解释一下：在ROS视角下，算法本身即为功能包，功能包中的节点为由源码编译而来的可执行程序。ROS接口编译即将自主编写的C++&#x2F;Python源码编译为可执行程序。</p><p>​依据官网指导，需在功能包中运行如下命令(build_ros.sh脚本之中)：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> Examples/ROS/ORB_SLAM2<span class="token function">mkdir</span> build<span class="token builtin class-name">cd</span> buildcmake <span class="token punctuation">..</span> <span class="token parameter variable">-DROS_BUILD_TYPE</span><span class="token operator">=</span>Release<span class="token function">make</span> <span class="token parameter variable">-j</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​然而，由于不是自己配置的系统环境。在此处编译着实吃了不少亏（偷掉的懒早晚得还）如前图显示，本机配置CUDA加速的opencv版本为3.3.1，但ROS环境却内置并兼容3.2.0版本。本人在反复摸索之后将ORBSLAM2算法配置文件CMakeLists.txt中opencv相关语句改为如下后通过编译：</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">find_package</span><span class="token punctuation">(</span>OpenCV <span class="token number">3.2.0</span> REQUIRED<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> OpenCV_FOUND<span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>FATAL_ERROR <span class="token string">"OpenCV 3.2.0 not found."</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>​最后，再将算法左右图像来源设置为T265鱼眼相机，并重新编译通过。具体需要将ROS接口中的ros_stereo.cc文件修改如下：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">message_filters<span class="token double-colon punctuation">::</span>Subscriber<span class="token operator">&lt;</span>sensor_msgs<span class="token double-colon punctuation">::</span>Image<span class="token operator">></span> <span class="token function">letft_sub</span><span class="token punctuation">(</span>nh<span class="token punctuation">,</span> <span class="token string">"/camera/fisheye1/image_raw"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>message_filters<span class="token double-colon punctuation">::</span>Subscriber<span class="token operator">&lt;</span>sensor_msgs<span class="token double-colon punctuation">::</span>Image<span class="token operator">></span> <span class="token function">right_sub</span><span class="token punctuation">(</span>nh<span class="token punctuation">,</span> <span class="token string">"/camera/fisheye2/image_raw"</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="T265检测与调用"><a href="#T265检测与调用" class="headerlink" title="T265检测与调用"></a>T265检测与调用</h3><p>​如背景简介所述，阿木实验室已经在P450已经安装<a href="https://dev.intelrealsense.com/docs/intel-realsensetm-visual-slam-and-the-t265-tracking-camera#43-intel-realsense-sdk-api">T265相关SDK</a>，下面的二次开发便可方便地直接调用其API完成所需功能。</p><p>​首先用如下命令检测T265连接情况，如果未检测到，重新插拔相机与Allspark计算机USB接口再次尝试。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rs-sensor-control<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​确定检测到设备后，便可尝试利用ROS启动相机相关功能节点，输入如下命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch realsense2_camera rs_t265.launch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​注意在运行前先去此launch文件中找到fisheye，把鱼眼相机打开，默认是关闭的。可输入以下命令进行话题监测核实。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rostopic list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​最后，还需要为T265相机补充一份yaml配置文件，参考<a href="https://blog.csdn.net/weixin_37835423/article/details/122682591">这篇博客</a></p><h3 id="算法实时运行测试与结果"><a href="#算法实时运行测试与结果" class="headerlink" title="算法实时运行测试与结果"></a>算法实时运行测试与结果</h3><p>​在上述准备工作全部完成后，便可正式开启双目T265实时运行ORBSLAM步骤，具体则为在ORBSLAM2算法文件夹下输入以下三行命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roscorerosrunORB_SLAM2 Stereo Vocabulary/ORBvoc.txt Examples/Stereo/RST265.yaml <span class="token boolean">false</span>roslaunch realsense2_camera rs_t265.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>​以下为本机运行结果：<img src="/./../images/1739793508882-5.png" alt="运行结果演示"></p><p>​准备一个假期、花费一个上午，终于折腾完毕，本人和电池都从满电干到了报警，，，好在，航模电池进入楼下安全箱充电，我也可以进入校门口赖冬梅充电~</p><p><img src="/./../images/%E5%85%85%E7%94%B5%E7%AE%B1.jpg" alt="充电箱"></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>春运</title>
      <link href="/posts/7ee5.html"/>
      <url>/posts/7ee5.html</url>
      
        <content type="html"><![CDATA[<p>​正月初起，雾气氤氲，残月西斜，高速干线上各类汽车尾灯照例列队成条条火红的长龙。南来北往的司机们先是惊叹于眼前“盛景”，而后焦急着解决内需，直到抱怨与无奈也改变不了什么的静默麻木。只有时不时爆竹烟花划过天空，才将人的本性唤醒，回想起这段旅程的期待、欣喜、辛酸与救赎。</p><p>​春运，发轫于中国传统佳节春节，思乡团圆的心切叠加上当代中国的庞大城市务工人群早就了此人类有史以来最大规模的人口迁移现象。自改革开放伊始的天价火车票到如今海陆空全方位满负荷压测，春运是上上下下的人们都绕不过的话题。在这般宏伟的驱动力下，即使是堪称“基建狂魔”的中国也不堪负荷。若自太空俯视全国交通路网，仿佛显微镜下观察到血管不息地喷张：关键枢纽点艰难地脉冲定下全线路的最低频率；随机的阻塞由高速管家交警与运维及时疏导；若是遇上致命风险，幕后大脑也会迅速做出维持功能完整的区间取舍。宏观上的静态展现不出微观上的动态，前车的缓慢蠕动累积产生更长的红色堵点，整体呈现出一种急而不乱，紧而不发的动态平衡。</p><p>​然而，饱和的信道必然增大误码的概率，过载的压力也会带来意想不到的危机。</p><p>​倒是符合宏观上的统计经验，我经历的第一场交通事故砸中了最频发的汽车高速公路。类似《流浪地球》中图恒宇的错愕，家人谈笑的不经意间，其他司机事出不明的急刹强力传导，在迅速见底的极限车距之后，我在副驾上亲眼所见引擎盖抗拒着扑向前车尾牌，轰隆一声仿佛触电一般又反弹立马缩了回来。好在车速不高，双方乘客无恙，惯性弹出的眼镜也奇迹地实现了软着陆。惊魂未定的我仍捏着准备播出SOS的iPhone发愣，见多识广的父亲即刻开始了他全面的危机管理：先报交警、现场拍照、再报保险。作为司机的母亲内疚地关心前车人员情况，而前一天才摸索明白三角反光标的我则火速复现其用法，在案发现场后100m设立警示标志。见了这么多次造成拥堵的车辆，没想到自己也成了“祸源”……<br>在完成必要的应急处理后，当事人的凌乱就从外在转向了内心，默默地感受对向车辆虎虎生风若有所思。在得知事发地点与车辆现状后，交警远程指挥我们就近驶离高速。意外发生第一时间人会本能的警觉，面对未知时显得草木皆兵，变形引擎盖下未知的管液是否酝酿着二次事故的风险？挂挡、启动、方向盘、车灯…….每一个平常基础的操作都让人神经紧绷，短短一百米的距离，却显得前所未有的长。或许成为勇士的路只有两条：积累经验将未知化为已知；释放远大的使命感为理想殉道。前者是高空层云中的中国机长；后者则是子弹旁的Donad Trump.</p><p>​灾祸降临之初，人会因前路不清而不知所措，也会有愤懑涌上心头质疑命运”Why Me?”。而当你知道已经做好了自己能做的一切之后，反而会将不安逐渐驱逐，静静地做一个旁观者。在等待交警返回开罚单的一个时辰中，我观察到接二连三的事故车辆被拖下高速路口。这是我第一次感受到每日乘坐的车在哭泣（水箱破裂），好在其仍不比同道上毁容的“难兄难弟”。这也是我切身感受到春运事故真正的频次，仅仅两小时，一个普通的高速出口，就已经排满了事故车辆等待高速上正在处理新事故的交警来开局责任书。好在节日喜庆，同病相怜，全责与无责、拖车与修车、路人与家人都在此打成一片，调侃着共度这一段意外的命运。好在我们的车挺争气，也感谢前车司机与修车师傅通力帮忙稳住了咱全家，小修小补后，我们即日再次启程。不禁感慨，人生也是如此，意外或许让人们暂时停住脚步，但击不垮人们内心对美好的向往，也挡不住人们前往所奔赴的梦想。</p><p>​既然是路网，拥有唯一目的地的车就必然要选择具体的路线，而在亲自上路前没人知道当前的路是不是最优。身处这样一个由千万微观个体实时反馈调整的系统，有效的预测很难实现。瞬间的最优路线即刻会因为市场效应而丧失最优。自作聪明的我们本以为绕开严重拥堵的G4选择国道能优化时长，没成想无处不在的“粤家车队”硬生生消磨了念想，而国道本就低的限速也不比高速。虽然都是堵，但堵的间隙也能产生可观累积的差距。好在，在父亲的命令下，我们重回高速及时止损，才终结几次妄想避开拥堵造成的东西往返无用功。起初的我还想据理力争，但面对理想与现实如此精微差异，我也只得心服口服，纸上得来终觉浅，绝知此事要躬行，吃一堑长一智了。只可惜，经此两役，初六中午出发的我们也赶不上初八零点的免高速DDL了，只得堵在九连山隧道里听着警报声默默承受。这是我第一次全身心体验长途春运，希望也是最后一次。兜兜转转，往返深圳与湖北单程1238Km，30小时路程，全额过路费689RMB，堪称难忘。</p><p>​漫长的春运路上，仿佛整个人生的浓缩与异变。有伴随《归途有风》旋律疾驰而过的洒脱豪迈；有与货箱奶牛不期而遇的惊喜抓拍；有高峡出平湖的壮美惊叹；有在小红书与堵友云聊智驾的感慨；还有通宵与父母享受天伦之乐后的大道行思。喜怒哀乐惊险奇绝浅忧虑可谓雨露均沾。春运的路虽遥，但心有所向终能至；人生的路不同，车速和方向由自己把控。复杂网络理论已经证明，堵车是一个多变量多约束下无法规避的自然现象。既如此，又何必跟整个系统斗智斗勇七拐八绕呢？随着交管部门的宏观调控，坚持选择的道路不再增加过多的个体变量才是整体最高效的解法。茫茫车海中各来自天南海北又奔向天南海北，能遇到是缘分，走好自己的车道，礼貌避开“异常”司机就好。春运路上如是；股票市场如是；人生大道概也如是。只可惜，规律背后的智慧往往与感觉相悖，而人却总把感觉当直觉。想到这里，或许就可以对这世界报以宽容。春节年夜饭桌上表哥面对亲戚智囊催婚时的公开求饶；赶免高速费DDL时就近收费口的集体鸣笛；春运征程凯旋在4S店排队修车时与保险公司的极限拉扯……这啼笑皆非的桩桩件件，总会让人在心里怨念：“都二十一世纪了…….”仿佛在今天的文明程度下，一切事情都必须是合情合理的。但其实人类几千年的的文明史和地球的历史相比，实在是太短暂了，大约相当于几分钟和一年的关系。虽然我们今天的的社会比农业文明时期已经高度发达了，但与它所能达到的文明程度相比，还是非常初级的。因此，再遇到各种缺憾也就没有什么好抱怨的了，因为我们人类还”太年轻”了，人类已经走过的路，相比今后要走的漫漫长路，只能算是刚刚起步。幸运的是，如果跳出一个个具体事件,站在历史的高度去看，我们会发现人类是向着美好的方向发展的。对于人类遇到的问题，最终我们发现答容案比问题更多。</p><p><img src="/../images/%E6%98%A5%E8%BF%90%E5%A5%B6%E7%89%9B.png" alt="春运奶牛"></p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 少年游记 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
